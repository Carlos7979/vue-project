import{_ as B,k as O,a as S,f as p,o as l,c as u,i as m,v as h,b as e,F as g,g as f,t as r,n as P,j as q,p as A,e as E}from"./index-c2968245.js";const k={}.VITE_USER_URL,w={name:"Order",components:{},data(){return{usersOrders:[]}},async mounted(){let t;if(this.isAdmin||(t=O("user").admin),this.isAdmin||t)try{let s=await S.get(k);s=s.data;const o=[];s.length&&(s.forEach(d=>{d.admin||d.orders.forEach(c=>{c.user=d.user,o.push(c)})}),o.sort((d,c)=>d.timestamp>c.timestamp?-1:d.timestamp<c.timestamp?1:0),this.usersOrders=o)}catch(s){console.log(s)}},methods:{total(t){let s=0,o=0;return t.products.forEach(d=>{s+=this.getProductById(d.productId).price*d.quantity,o+=d.quantity}),{money:s,quantity:o}}},computed:{...p("user",["getOrders"]),...p("user",{admin:"isAdmin"}),...p("product",["getProductById"]),orders(){return this.isAdmin?this.usersOrders:this.getOrders},isAdmin(){return this.admin}}},_=t=>(A("data-v-20f7558d"),t=t(),E(),t),L={class:"orders"},V={class:"product-elements-header"},F={class:"product-elements"},N={class:"product-element t-header"},D=_(()=>e("div",{class:"product-element t-header"},"Fecha y hora:",-1)),R={class:"product-element t-header"},U={class:"product-element t-header"},C={class:"product-element t-header"},T=q('<div class="product-elements-header" data-v-20f7558d><div class="product-elements" data-v-20f7558d><div class="product-element t-header" data-v-20f7558d>Producto</div><div class="product-element t-header" data-v-20f7558d>Imagen</div><div class="product-element t-header" data-v-20f7558d>Precio</div><div class="product-element t-header" data-v-20f7558d>Cantidad</div><div class="product-element t-header" data-v-20f7558d>Sub total</div></div></div>',1),b={class:"product-element"},j={class:"product-element"},z={class:"image-container"},G=["src","alt"],x={class:"product-element"},H={class:"quantity"},J={class:"product-element"},K={class:"quantity"},M={class:"product-element"},Q={class:"product-elements-header"},W={class:"product-elements"},X=_(()=>e("div",{class:"product-element t-header"},null,-1)),Y=_(()=>e("div",{class:"product-element t-header"},null,-1)),Z=_(()=>e("div",{class:"product-element t-header"},null,-1)),$={class:"product-element t-header"},ee={class:"product-element t-header"},te={class:"empty"};function se(t,s,o,d,c,a){return l(),u("div",null,[m(e("div",L,[(l(!0),u(g,null,f(a.orders,(n,v)=>(l(),u("div",{class:"order",key:`${v}-order`},[e("div",V,[e("div",F,[e("div",N,"Nº "+r(a.orders.length-v),1),m(e("div",{class:"product-element t-header"},r(n.user),513),[[h,a.isAdmin]]),D,e("div",R,r(new Date(n.timestamp).toLocaleString()),1),m(e("div",U,null,512),[[h,!a.isAdmin]]),e("div",C,"Total: "+r(a.total(n).money),1)])]),T,(l(!0),u(g,null,f(n.products,(i,y)=>(l(),u("div",{key:`${y}-order`},[e("div",{class:P(`product-elements ${y%2===1?"even-line":""}`)},[e("div",b,r(t.getProductById(i.productId).title),1),e("div",j,[e("div",z,[e("img",{src:t.getProductById(i.productId).img,alt:t.getProductById(i.productId).title,onLoad:s[0]||(s[0]=I=>I.target.style.opacity=1)},null,40,G)])]),e("div",x,[e("span",H,r(t.getProductById(i.productId).price),1)]),e("div",J,[e("span",K,r(i.quantity),1)]),e("div",M,r(t.getProductById(i.productId).price*i.quantity),1)],2)]))),128)),e("div",Q,[e("div",W,[X,Y,Z,e("div",$,r(a.total(n).quantity),1),e("div",ee,r(a.total(n).money),1)])])]))),128)),m(e("div",te,"No hay órdenes de compra",512),[[h,!a.orders.length]])],512),[[h,a.orders.length||c.usersOrders.length]])])}const re=B(w,[["render",se],["__scopeId","data-v-20f7558d"]]);export{re as default};
