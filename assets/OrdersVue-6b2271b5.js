import{_ as B,k as O,a as P,f as p,o as l,c as u,i as m,v as h,b as e,F as y,g,t as r,n as S,j as q,p as A,e as k}from"./index-c066fabd.js";const w="https://649fbf32ed3c41bdd7a6a1d1.mockapi.io/api/food/users",E={name:"Order",components:{},data(){return{usersOrders:[]}},async mounted(){let t;if(this.isAdmin||(t=O("user").admin),this.isAdmin||t)try{let s=await P.get(w);s=s.data;const o=[];s.length&&(s.forEach(d=>{d.admin||d.orders.forEach(c=>{c.user=d.user,o.push(c)})}),o.sort((d,c)=>d.timestamp>c.timestamp?-1:d.timestamp<c.timestamp?1:0),this.usersOrders=o)}catch(s){console.log(s)}},methods:{total(t){let s=0,o=0;return t.products.forEach(d=>{s+=this.getProductById(d.productId).price*d.quantity,o+=d.quantity}),{money:s,quantity:o}}},computed:{...p("user",["getOrders"]),...p("user",{admin:"isAdmin"}),...p("product",["getProductById"]),orders(){return this.isAdmin?this.usersOrders:this.getOrders},isAdmin(){return this.admin}}},_=t=>(A("data-v-20f7558d"),t=t(),k(),t),F={class:"orders"},L={class:"product-elements-header"},N={class:"product-elements"},V={class:"product-element t-header"},b=_(()=>e("div",{class:"product-element t-header"},"Fecha y hora:",-1)),D={class:"product-element t-header"},C={class:"product-element t-header"},j={class:"product-element t-header"},z=q('<div class="product-elements-header" data-v-20f7558d><div class="product-elements" data-v-20f7558d><div class="product-element t-header" data-v-20f7558d>Producto</div><div class="product-element t-header" data-v-20f7558d>Imagen</div><div class="product-element t-header" data-v-20f7558d>Precio</div><div class="product-element t-header" data-v-20f7558d>Cantidad</div><div class="product-element t-header" data-v-20f7558d>Sub total</div></div></div>',1),G={class:"product-element"},R={class:"product-element"},T={class:"image-container"},U=["src","alt"],x={class:"product-element"},H={class:"quantity"},J={class:"product-element"},K={class:"quantity"},M={class:"product-element"},Q={class:"product-elements-header"},W={class:"product-elements"},X=_(()=>e("div",{class:"product-element t-header"},null,-1)),Y=_(()=>e("div",{class:"product-element t-header"},null,-1)),Z=_(()=>e("div",{class:"product-element t-header"},null,-1)),$={class:"product-element t-header"},ee={class:"product-element t-header"},te={class:"empty"};function se(t,s,o,d,c,a){return l(),u("div",null,[m(e("div",F,[(l(!0),u(y,null,g(a.orders,(n,v)=>(l(),u("div",{class:"order",key:`${v}-order`},[e("div",L,[e("div",N,[e("div",V,"Nº "+r(a.orders.length-v),1),m(e("div",{class:"product-element t-header"},r(n.user),513),[[h,a.isAdmin]]),b,e("div",D,r(new Date(n.timestamp).toLocaleString()),1),m(e("div",C,null,512),[[h,!a.isAdmin]]),e("div",j,"Total: "+r(a.total(n).money),1)])]),z,(l(!0),u(y,null,g(n.products,(i,f)=>(l(),u("div",{key:`${f}-order`},[e("div",{class:S(`product-elements ${f%2===1?"even-line":""}`)},[e("div",G,r(t.getProductById(i.productId).title),1),e("div",R,[e("div",T,[e("img",{src:t.getProductById(i.productId).img,alt:t.getProductById(i.productId).title,onLoad:s[0]||(s[0]=I=>I.target.style.opacity=1)},null,40,U)])]),e("div",x,[e("span",H,r(t.getProductById(i.productId).price),1)]),e("div",J,[e("span",K,r(i.quantity),1)]),e("div",M,r(t.getProductById(i.productId).price*i.quantity),1)],2)]))),128)),e("div",Q,[e("div",W,[X,Y,Z,e("div",$,r(a.total(n).quantity),1),e("div",ee,r(a.total(n).money),1)])])]))),128)),m(e("div",te,"No hay órdenes de compra",512),[[h,!a.orders.length]])],512),[[h,a.orders.length||c.usersOrders.length]])])}const re=B(E,[["render",se],["__scopeId","data-v-20f7558d"]]);export{re as default};
